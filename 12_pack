#!/bin/sh
if [ $# != 2 ];then
	echo "usage  ./pack [project] [packname]"
	exit 1
fi

if [ ! -e alps/out ];then
	echo "No out dir!!!"
	exit 1
fi	

HOMEDIR=$PWD
OUTDIR=alps/out/target/product/$1/ 
DESDIR=$2/$2
Mode_databse1=alps/mediatek/cgen/APDB_MT6582_S01_ALPS.JB5.TABLET.MP_
Mode_databse2=alps/mediatek/config/out/$1/modem/BPLGUInfoCustomAppSrcP_MT6582_S00_MOLY_WR8_W1315_MD_WG_MP_V*
DATABASEDIR=$DESDIR/databases
mkdir -p $DATABASEDIR
cp $Mode_databse1 $DATABASEDIR
cp $Mode_databse2 $DATABASEDIR
cd $OUTDIR
ALLFILE=`ls -l | grep -v ^d | grep -v "zip" | awk '{print $8}'`

for i in $ALLFILE
do
	cp $i $HOMEDIR/$DESDIR
	echo "cp $i "
done
cd $HOMEDIR/$DESDIR
echo "================>>begin compressing"
cd ..
tar czvfh $2.tar.gz $2
echo "================>>Compressed OK!"
rm $2 -r
cd ../
if [ ! -e ROM ];then
	mkdir ROM
fi
mv $2 ./ROM/$2
